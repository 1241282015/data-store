{"version":3,"file":"index.js","sourceRoot":"","sources":["../index.ts"],"names":[],"mappings":";AAAA,IAAI,QAAQ,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;AACtC,gBAAE,CAAM;AAAC,kBAAkB,CAAC;AACjC,IAAI,SAAS,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AAGrC,cAAqB,KAAY;IAC7B,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACzB,CAAC;AAFe,YAAI,OAEnB,CAAA;AAED,oBAAiC,MAAW,EAAE,UAAgB,EAAE,GAAQ;;QACpE,EAAE,CAAA,CAAC,CAAC,GAAG,CAAC,CAAA,CAAC;YACL,MAAM,IAAI,KAAK,CAAC,2CAA2C,CAAC,CAAC;QACjE,CAAC;QACD,IAAG,CAAC;YACA,MAAM,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACxB,CAAC;QAAA,KAAK,CAAA,CAAC,GAAG,CAAC,CAAA,CAAC;YACR,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACrB,CAAC;IACL,CAAC;;AATqB,kBAAU,aAS/B,CAAA;AAGD,sBAAmC,SAAc,EAAE,MAAW,EAAE,UAAe;;QAC3E,SAAS;QACT,oBAAoB;QACpB,OAAO;QACP,+EAA+E;QAC/E,eAAe;QACf,wBAAwB;QACxB,IAAI;QACJ,EAAE;QACF,0CAA0C;QAC1C,kFAAkF;QAClF,+CAA+C;QAC/C,uCAAuC;QACvC,QAAQ;QACR,IAAI;QAEJ,KAAK;QACL;;WAEG;QACH,IAAG,CAAC;YACA,MAAM,EAAE,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;QAC/B,CAAE;QAAA,KAAK,CAAA,CAAC,GAAG,CAAC,CAAA,CAAC;YACT,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;QACpB,CAAC;IAEL,CAAC;;AA1BqB,oBAAY,eA0BjC,CAAA","sourcesContent":["let database = require(\"@jingli/database\");\nlet {DB} from \"@jingli/database\";\nvar Sequelize = require(\"sequelize\");\n\n\nexport function init(dbUrl:string){\n    database.init(dbUrl);\n}\n\nexport async function data_store(schema?:any, properties?: any, sql?:any){\n    if(!sql){\n        throw new Error(\"no available sql, grammar not support yet\");\n    }\n    try{\n        await DB.query(sql);\n    }catch(err){\n        console.log(err);\n    }\n}\n\n\nexport async function data_compare(dbCompare?:any, dbBase?:any, compareSql?:any){\n    // //方式一：\n    // let records: any;\n    // try{\n    //     records = await DB.query(dbCompare, {type:Sequelize.QueryTypes.SELECT});\n    // }catch(err){\n    //     console.log(err);\n    // }\n    //\n    // for(let i =0; i < records.length; i++){\n    //     let isExisted = await DB.query(dbBase, {type:Sequelize.QueryTypes.SELECT});\n    //     if(isExisted && isExisted.length == 0) {\n    //         await DB.query(insertNewDb);\n    //     }\n    // }\n\n    //方式2\n    /*\n     * compareSql形式为: create table place.cities1 as (select * from place.cities as pc, place.tfcities as pt where pc.name not exists\n     */\n    try{\n        await DB.query(compareSql);\n    } catch(err){\n        console.log(err)\n    }\n\n}"]}